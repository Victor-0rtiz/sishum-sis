!function(){let o,e,t;$.ajax({url:"/api/estudiantes/all",dataType:"json",success:function(o){console.log(o);$("#tablaEstudiantes").DataTable({data:o,columns:[{data:"Id"},{data:"Nombres"},{data:"Cod_estudiante"},{data:"Tutor_Nombres"},{data:null,render:function(o,e,t){return'<button type="button" class="btn btn-primary btn-editar" data-bs-toggle="modal" data-bs-target="#editarModal">Editar</button> <button type="button" class="btn btn-danger">Borrar</button>'}}],language:{lengthMenu:"Mostrar _MENU_ registros por página",zeroRecords:"No se encontraron resultados",info:"Mostrando página _PAGE_ de _PAGES_",infoEmpty:"No hay registros disponibles",infoFiltered:"(filtrado de _MAX_ registros totales)",search:"Buscar:",loadingRecords:"Cargando...",processing:"Procesando...",emptyTable:"No hay datos disponibles en la tabla",aria:{sortAscending:": activar para ordenar la columna de manera ascendente",sortDescending:": activar para ordenar la columna de manera descendente"}}})},error:function(o,e,t){console.error(o.responseText)}}),$.ajax({url:"/api/sexo/all",dataType:"json",success:function(e){o=e,console.log(e,"del sexo"),$("#sexo").empty(),e.forEach((function(o){$("#sexo").append('<option value="'+o.Id+'">'+o.Nombre+"</option>")}))},error:function(o){}}),$.ajax({url:"/api/departamentos/all",dataType:"json",success:function(o){console.log(o,"del departamento"),$("#Departamento").empty(),o.forEach((function(o){$("#Departamento").append('<option value="'+o.IdDepartamento+'">'+o.Nombre+"</option>")}))},error:function(o){}}),$.ajax({url:"/api/municipios/all",dataType:"json",success:function(o){console.log(o,"del municipios"),$("#Municipio").empty(),o.forEach((function(o){$("#Municipio").append('<option value="'+o.IdMunicipio+'">'+o.Nombre+"</option>")}))},error:function(o){}}),$.ajax({url:"/api/tutores/all",dataType:"json",success:function(o){console.log(o,"de los tutores"),t=o},error:function(o,e,t){console.error(o.responseText)}}),$(document).ready((()=>{$('input[name="tutorExistente"]').change((function(){const n=$(this).val();$("#tutorchange").empty(),"2"===n?(e=2,console.log("Tutor existente seleccionado"),$("#tutorchange").append(" <form id='formTutorNuevo'>\n                <div class='mb-3'>\n                        <label for='nombresUsser' class='form-label'>Nombres</label>\n                        <input type='text' class='form-control' name='Nombres' id='nombresUsser'>\n                    </div>\n                    <div class='mb-3'>\n                        <label for='apellidosUsser' class='form-label'>Apellidos</label>\n                        <input type='text' class='form-control' name='Apellidos' id='apellidosUsser'>\n                    </div>\n                    <div class='mb-3'>\n                        <label for='Telefono' class='form-label'>Telefono</label>\n                        <input type='number' class='form-control' name='Telefono' id='Telefono'>\n                    </div>\n                    <div class='mb-3'>\n                        <label for='Cedula' class='form-label'>Cédula</label>\n                        <input type='text' class='form-control' name='Cedula' id='Cedula'>\n                    </div>\n                    <div class='mb-3'>\n                        <label for='Ocupacion' class='form-label'>Ocupación</label>\n                        <input type='text' class='form-control' name='Ocupacion' id='Ocupacion'>\n                    </div>\n                    <div class='mb-3'>\n                        <label for='Direccion' class='form-label'>Dirección</label>\n                        <textarea name='Direccion' id='Direccion' class='form-control'></textarea>\n                    </div>\n\n                    <div class='mb-3'>\n                        <label for='sexoTutor' class='form-label'>Sexo</label>\n                        <select class='form-select' name='Id_sexo' id='sexoTutor'>\n                        </select>\n                    </div>\n                </form>"),o.forEach((function(o){$("#sexoTutor").append('<option value="'+o.Id+'">'+o.Nombre+"</option>")}))):"1"===n&&(e=1,console.log("Nuevo tutor seleccionado"),$("#tutorchange").append("<form id='formTutorExistente'>\n\n                <div class='mb-3'>\n                        <label for='Tutor' class='form-label'>Tutor</label>\n                        <select class='form-select' name='Id_Tutor' id='Tutor'>\n                        </select>\n                    </div>\n\n\n                </form>"),t.forEach((function(o){$("#Tutor").append('<option value="'+o.Id+'">'+o.Nombres+" "+o.Apellidos+"</option>")})))})),$(document).ready((()=>{$("#GuardarEstudiante").click((async()=>{const o=new FormData($("#formAddDatosPersonales")[0]),e=new FormData($("#formEstudiante")[0]);function t(o){let e={};return o.forEach(((o,t)=>{e[t]=o})),e}const n=t(o),a=t(e),r={datos_personales:n,estudiante:a},s=$("input[name='tutorExistente']:checked").val();if(s){if(1==s){const o=t(new FormData($("#formTutorExistente")[0]));r.TutorExistente=o,delete r.TutorNuevo}else{const o=t(new FormData($("#formTutorNuevo")[0]));r.TutorNuevo=o,delete r.TutorExistente}i(n)&&i(a)&&(1!=s||i(r.TutorExistente))&&(1==s||i(r.TutorNuevo))?($.ajax({url:"/api/estudiantes/add",dataType:"json",type:"POST",data:r,success:async function(o){if(console.log(o,"del back"),!o.alert)return o.exito?(await async function(){$.ajax({url:"/api/estudiantes/all",dataType:"json",success:function(o){console.log(o);$("#tablaEstudiantes").DataTable({destroy:!0,data:o,columns:[{data:"Id"},{data:"Nombres"},{data:"Cod_estudiante"},{data:"Tutor_Nombres"},{data:null,render:function(o,e,t){return'<button type="button" class="btn btn-primary btn-editar" data-bs-toggle="modal" data-bs-target="#editarModal">Editar</button> <button type="button" class="btn btn-danger">Borrar</button>'}}],language:{lengthMenu:"Mostrar _MENU_ registros por página",zeroRecords:"No se encontraron resultados",info:"Mostrando página _PAGE_ de _PAGES_",infoEmpty:"No hay registros disponibles",infoFiltered:"(filtrado de _MAX_ registros totales)",search:"Buscar:",loadingRecords:"Cargando...",processing:"Procesando...",emptyTable:"No hay datos disponibles en la tabla",aria:{sortAscending:": activar para ordenar la columna de manera ascendente",sortDescending:": activar para ordenar la columna de manera descendente"}}})},error:function(o,e,t){console.error(o.responseText)}})}(),$("#formAddDatosPersonales")[0].reset(),$("#formEstudiante")[0].reset(),1!=s&&$("#formTutorNuevo")[0].reset(),$("#tutorchange").empty(),$('input[name="tutorExistente"]').prop("checked",!1),$("#agregarModal").modal("hide"),void await Swal.fire({icon:"success",html:`<span style="font-size: 1.5rem; font-weight: 900;">${o.exito}</span>`,toast:!0,position:"bottom-end",iconColor:"green",timer:1500,padding:"2rem",background:"#B8FFB8",showConfirmButton:!1})):void(o.error&&await Swal.fire({icon:"error",html:`<span style="font-size: 1.5rem; font-weight: 900;">${o.error}</span>`,toast:!0,position:"bottom-end",iconColor:"red",timer:1500,padding:"2rem",background:"#FFB8B8",showConfirmButton:!1}));await Swal.fire({icon:"warning",html:`<span style="font-size: 1.5rem; font-weight: 900;">${o.alert}</span>`,toast:!0,position:"bottom-end",iconColor:"red",timer:1500,padding:"2rem",background:"#FFFFB8",showConfirmButton:!1})},error:function(o){}}),console.log(r)):await Swal.fire({icon:"error",html:'<span style="font-size: 1.5rem; font-weight: 900;">Todos los campos son obligatorios</span>',toast:!0,position:"bottom-end",iconColor:"red",timer:1500,padding:"2rem",background:"rgb(255, 199, 199)",showConfirmButton:!1})}else await Swal.fire({icon:"error",html:'<span style="font-size: 1.5rem; font-weight: 800;">Debe seleccionar una opción para el tutor</span>',toast:!0,position:"bottom-end",iconColor:"red",timer:1500,padding:"2rem",background:"rgb(255, 184, 184)",showConfirmButton:!1});function i(o){for(let e in o)if(""===o[e].trim())return!1;return!0}}))}))}))}();//# sourceMappingURL=tablaestudiantes.js.map
