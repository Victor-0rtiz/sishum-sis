!function(){function o(o){let a={};return o.forEach(((o,n)=>{a[n]=o})),a}async function a(){$.ajax({url:"/api/grado/calificacion/all",dataType:"json",success:function(o){console.log(o);const a=$("#tablaasingas").DataTable();a.clear(),a.rows.add(o),a.draw()},error:function(o,a,n){console.error(o.responseText)}})}$.ajax({url:"/api/grado/calificacion/all",dataType:"json",success:function(o){console.log(o);const a=$("#tablaasingas").DataTable({data:o,columns:[{data:"Id"},{data:"Id_grado_nombre"},{data:"Id_turno_nombre"},{data:"Id_anio_lectivo_nombre"},{data:null,render:function(o,a,n){return`\n                                <button type="button" class="btn btn-primary btn-editar" data-bs-toggle="modal" data-bs-target="#editarModal" data-id="${n.id}">Editar</button>\n                                <a href="/dashboard/calificaciones-asignaturas?grado=${n.Id_grado}&turno=${n.Id_turno}&idDetalle=${n.Id}" class="btn btn-secondary btn-verasignaturas">\n                           Asignaturas \n                             </a> \n                                <button type="button" class="btn btn-danger btn-borrar" data-id="${n.Id}">Borrar</button>\n                            `}}],language:{lengthMenu:"Mostrar _MENU_ registros por página",zeroRecords:"No se encontraron resultados",info:"Mostrando página _PAGE_ de _PAGES_",infoEmpty:"No hay registros disponibles",infoFiltered:"(filtrado de _MAX_ registros totales)",search:"Buscar:",loadingRecords:"Cargando...",processing:"Procesando...",emptyTable:"No hay datos disponibles en la tabla",aria:{sortAscending:": activar para ordenar la columna de manera ascendente",sortDescending:": activar para ordenar la columna de manera descendente"}}});$("#tablaasingas tbody").on("click",".btn-editar",(function(){const o=a.row($(this).parents("tr")).data();console.log(o),$("#Id_asignadasasig").val(o.Id),$("#Grado2").val(o.Id_grado),$("#Turno2").val(o.Id_turno),$("#AnioLectivo2").val(o.Id_anio_lectivo)}))},error:function(o,a,n){console.error(o.responseText)}}),$("#tablaasingas").on("click",".btn-borrar",(function(){const o=$(this).data("id");console.log("eliminar el registro ID:",o),$.ajax({url:"/api/grado/calificacion/del",type:"POST",data:{Id:o},dataType:"json",success:async function(o){console.log(o);if(o.exito)return await a(),void await Swal.fire({icon:"success",html:'<span style="font-size: 1.5rem; font-weight: 900;">Eliminado Correctamente</span>',toast:!0,position:"bottom-end",iconColor:"green",timer:1500,padding:"2rem",background:"#B8FFB8",showConfirmButton:!1})},error:function(o,a,n){console.error("Error:",n)}})})),$.ajax({url:"/api/grados/all",dataType:"json",success:function(o){console.log(o,"del listado del grado"),o.forEach((function(o){$("#Grado").append('<option value="'+o.Id+'">'+o.Nombre+"</option>"),$("#Grado2").append('<option value="'+o.Id+'">'+o.Nombre+"</option>")}))},error:function(o,a,n){console.error(o.responseText)}}),$.ajax({url:"/api/turnos/all",dataType:"json",success:function(o){console.log(o,"del listado del turno"),o.forEach((function(o){$("#Turno").append('<option value="'+o.Id+'">'+o.Nombre+"</option>"),$("#Turno2").append('<option value="'+o.Id+'">'+o.Nombre+"</option>")}))},error:function(o,a,n){console.error(o.responseText)}}),$.ajax({url:"/api/anioslectivos/all",dataType:"json",success:function(o){console.log(o,"del listado del anio lectivo"),o.forEach((function(o){$("#AnioLectivo").append('<option value="'+o.Id+'">'+o.anio+"</option>"),$("#AnioLectivo2").append('<option value="'+o.Id+'">'+o.anio+"</option>")}))},error:function(o,a,n){console.error(o.responseText)}}),$(document).ready((()=>{$("#GuardarAnioGradoTurno").click((async()=>{let n=new FormData($("#FormAnioGradoTurno")[0]);n=o(n),console.log(n),$.ajax({url:"/api/grado/calificacion/add",type:"POST",data:n,dataType:"json",success:async function(o){if(console.log(o,"de agregar"),o.exito)return await a(),$("#FormAnioGradoTurno")[0].reset(),$("#asignarTurnoGrado").modal("hide"),void await Swal.fire({icon:"success",html:`<span style="font-size: 1.5rem; font-weight: 900;">${o.exito}</span>`,toast:!0,position:"bottom-end",iconColor:"green",timer:1500,padding:"2rem",background:"#B8FFB8",showConfirmButton:!1});o.error?await Swal.fire({icon:"error",html:`<span style="font-size: 1.5rem; font-weight: 900;">${o.error}</span>`,toast:!0,position:"bottom-end",iconColor:"red",timer:1500,padding:"2rem",background:"#FFB8B8",showConfirmButton:!1}):o.alert&&await Swal.fire({icon:"warning",html:`<span style="font-size: 1.5rem; font-weight: 900;">${o.alert}</span>`,toast:!0,position:"bottom-end",iconColor:"yellow",timer:1500,padding:"2rem",background:"#F6FBC2",showConfirmButton:!1})},error:function(o,a,n){console.error(o.responseText)}})})),$("#GuardarFormAnioGradoTurnoEdit").click((async function(){let n=new FormData($("#FormAnioGradoTurnoEdit")[0]);n=o(n),$.ajax({url:"/api/grado/calificacion/edit",method:"POST",dataType:"json",data:n,success:async function(o){if(console.log(o),o.exito)return $("#FormAnioGradoTurnoEdit")[0].reset(),await a(),$("#editarModal").modal("hide"),void await Swal.fire({icon:"success",html:`<span style="font-size: 1.5rem; font-weight: 900;">${o.exito}</span>`,toast:!0,position:"bottom-end",iconColor:"green",timer:1500,padding:"2rem",background:"#B8FFB8",showConfirmButton:!1})},error:function(o,a,n){console.error(o.responseText)}})}))}))}();//# sourceMappingURL=tablacalificaciones.js.map
