!function(){async function o(){console.log("actualizando..."),$.ajax({url:"/api/docentes/all",dataType:"json",success:function(o){console.log(o);const e=$("#tablaDocentes").DataTable();e.clear(),e.rows.add(o),e.draw()},error:function(o,e,t){console.error(o.responseText)}})}$.ajax({url:"/api/docentes/all",dataType:"json",success:function(o){console.log(o);const e=$("#tablaDocentes").DataTable({data:o,columns:[{data:"Id"},{data:"Nombres"},{data:"Apellidos"},{data:"Cod_docente"},{data:"usser"},{data:null,render:function(o,e,t){return`\n                            <button type="button" class="btn btn-primary btn-editar" data-bs-toggle="modal" data-bs-target="#editarModal" data-id="${t.Id}">Editar</button>\n                           <button type="button" class="btn btn-danger btn-borrar" data-id="${t.Id}">Borrar</button>\n                                       `}}],language:{lengthMenu:"Mostrar _MENU_ registros por página",zeroRecords:"No se encontraron resultados",info:"Mostrando página _PAGE_ de _PAGES_",infoEmpty:"No hay registros disponibles",infoFiltered:"(filtrado de _MAX_ registros totales)",search:"Buscar:",loadingRecords:"Cargando...",processing:"Procesando...",emptyTable:"No hay datos disponibles en la tabla",aria:{sortAscending:": activar para ordenar la columna de manera ascendente",sortDescending:": activar para ordenar la columna de manera descendente"}}});$("#tablaDocentes tbody").on("click",".btn-editar",(function(){const o=e.row($(this).parents("tr")).data();console.log(o),$("#Id_dpEdit").val(o.Id_datos_personales),$("#Id_DocEdit").val(o.Id),$("#nombresUsserEdit").val(o.Nombres),$("#apellidosUsserEdit").val(o.Apellidos),$("#TelefonoEdit").val(o.Telefono),$("#DireccionEdit").val(o.Direccion),$("#sexoEdit").val(o.Id_sexo),$("#CodDocenteEdit").val(o.Cod_docente)}))},error:function(o,e,t){console.error(o.responseText)}}),$.ajax({url:"/api/usuarios/tipouser",dataType:"json",success:function(o){console.log(o,"del tipo"),$("#agregarIdTipoUsuario").empty(),o.forEach((function(o){$("#agregarIdTipoUsuario").append('<option value="'+o.Id+'">'+o.Nombre+"</option>")}))},error:function(o){}}),$.ajax({url:"/api/sexo/all",dataType:"json",success:function(o){console.log(o,"del sexo"),$("#sexo").empty(),o.forEach((function(o){$("#sexo").append('<option value="'+o.Id+'">'+o.Nombre+"</option>"),$("#sexoEdit").append('<option value="'+o.Id+'">'+o.Nombre+"</option>")}))},error:function(o){}}),$("#tablaDocentes").on("click",".btn-borrar",(function(){const e=$(this).data("id");console.log("eliminar el registro ID:",e),$.ajax({url:"/api/docentes/del",type:"POST",data:{Id:e},dataType:"json",success:async function(e){console.log(e);if(e.exito)return await o(),void await Swal.fire({icon:"success",html:'<span style="font-size: 1.5rem; font-weight: 900;">Eliminado Correctamente</span>',toast:!0,position:"bottom-end",iconColor:"green",timer:1500,padding:"2rem",background:"#B8FFB8",showConfirmButton:!1})},error:function(o,e,t){console.error("Error:",t)}})})),$("#formDocente").on("submit",(function(e){e.preventDefault();const t=new FormData($("#formAddDatosPersonales")[0]);function n(o){let e={};return o.forEach(((o,t)=>{e[t]=o})),e}const r={docente:n(new FormData($("#formDocente")[0])),datos_personales:n(t)},a=/^\d{8,11}$/,s=$('input[name="Telefono"]');let i=!0;s.each((async function(){if(!a.test($(this).val()))return i=!1,await Swal.fire({icon:"error",html:'<span style="font-size: 1.5rem; font-weight: 800;">El celular debe tener de 8 a 12 dígitos</span>',toast:!0,position:"bottom-end",iconColor:"red",timer:1500,padding:"2rem",background:"rgb(255, 184, 184)",showConfirmButton:!1}),$(this).css("border","1px solid red"),!1;$(this).css("border","")})),i&&$.ajax({url:"/api/docentes/add",type:"POST",data:r,dataType:"json",success:async function(e){console.log(e),e.error&&Swal.fire({icon:"error",html:`<span style="font-size: 1.5rem; font-weight: 900;">${e.error}</span>`,toast:!0,position:"bottom-end",iconColor:"red",timer:1500,padding:"2rem",background:"rgb(231, 184, 184)",showConfirmButton:!1}),e.act&&(await o(),$("#agregarModal").modal("hide"),Swal.fire({icon:"success",html:`<span style="font-size: 1.5rem; font-weight: 900;">${e.resp}</span>`,toast:!0,position:"bottom-end",iconColor:"green",timer:1500,padding:"2rem",background:"rgb(168,255,162)",showConfirmButton:!1})),$("#addModal").modal("hide")},error:function(o,e,t){console.error(o.responseText)}})})),$("#formDocente").on("submit",(function(e){e.preventDefault();const t=new FormData($("#formAddDatosPersonales")[0]);function n(o){let e={};return o.forEach(((o,t)=>{e[t]=o})),e}const r={docente:n(new FormData($("#formDocente")[0])),datos_personales:n(t)},a=/^\d{8,11}$/,s=$('input[name="Telefono"]');let i=!0;s.each((async function(){if(!a.test($(this).val()))return i=!1,await Swal.fire({icon:"error",html:'<span style="font-size: 1.5rem; font-weight: 800;">El celular debe tener de 8 a 12 dígitos</span>',toast:!0,position:"bottom-end",iconColor:"red",timer:1500,padding:"2rem",background:"rgb(255, 184, 184)",showConfirmButton:!1}),$(this).css("border","1px solid red"),!1;$(this).css("border","")})),i&&$.ajax({url:"/api/docentes/edit",type:"POST",data:r,dataType:"json",success:async function(e){console.log(e),e.error&&Swal.fire({icon:"error",html:`<span style="font-size: 1.5rem; font-weight: 900;">${e.error}</span>`,toast:!0,position:"bottom-end",iconColor:"red",timer:1500,padding:"2rem",background:"rgb(231, 184, 184)",showConfirmButton:!1}),e.exito&&(await o(),$("#formAddDatosPersonales")[0].reset(),$("#formDocente")[0].reset(),$("#agregarModal").modal("hide"),Swal.fire({icon:"success",html:`<span style="font-size: 1.5rem; font-weight: 900;">${e.resp}</span>`,toast:!0,position:"bottom-end",iconColor:"green",timer:1500,padding:"2rem",background:"rgb(168,255,162)",showConfirmButton:!1})),$("#addModal").modal("hide")},error:function(o,e,t){console.error(o.responseText)}})})),$("#formDocenteEdit").on("submit",(function(e){e.preventDefault();const t=new FormData($("#formAddDatosPersonalesEdit")[0]);function n(o){let e={};return o.forEach(((o,t)=>{e[t]=o})),e}const r={docente:n(new FormData($("#formDocenteEdit")[0])),datos_personales:n(t)},a=/^\d{8,11}$/,s=$(".checkTelefono");let i=!0;s.each((async function(){if(!a.test($(this).val()))return i=!1,await Swal.fire({icon:"error",html:'<span style="font-size: 1.5rem; font-weight: 800;">El celular debe tener de 8 a 12 dígitos</span>',toast:!0,position:"bottom-end",iconColor:"red",timer:1500,padding:"2rem",background:"rgb(255, 184, 184)",showConfirmButton:!1}),$(this).css("border","1px solid red"),!1;$(this).css("border","")})),i&&$.ajax({url:"/api/docentes/edit",type:"POST",data:r,dataType:"json",success:async function(e){console.log(e),e.error&&Swal.fire({icon:"error",html:`<span style="font-size: 1.5rem; font-weight: 900;">${e.error}</span>`,toast:!0,position:"bottom-end",iconColor:"red",timer:1500,padding:"2rem",background:"rgb(231, 184, 184)",showConfirmButton:!1}),e.exito&&(await o(),$("#editarModal").modal("hide"),Swal.fire({icon:"success",html:`<span style="font-size: 1.5rem; font-weight: 900;">${e.exito}</span>`,toast:!0,position:"bottom-end",iconColor:"green",timer:1500,padding:"2rem",background:"rgb(168,255,162)",showConfirmButton:!1}))},error:function(o,e,t){console.error(o.responseText)}})}))}();//# sourceMappingURL=tabladocentes.js.map
