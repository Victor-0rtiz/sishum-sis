!function(){const o=new URLSearchParams(window.location.search).get("dga");function a(o){let a={};return o.forEach(((o,t)=>{a[t]=o})),a}async function t(){$.ajax({url:"/api/calificaciones/notas/all",type:"POST",data:{dga:o},dataType:"json",success:function(o){console.log(o);const a=$("#tablaCaliAsign").DataTable();a.clear(),a.rows.add(o),a.draw()},error:function(o,a,t){console.error(o.responseText)}})}console.log("dga",o),$.ajax({url:"/api/calificaciones/notas/all",type:"POST",data:{dga:o},dataType:"json",success:function(o){console.log(o);const a=$("#tablaCaliAsign").DataTable({data:o,columns:[{data:"Id"},{data:"Nombres"},{data:"Nota"},{data:"Nota_2"},{data:"Nota_3"},{data:null,render:function(o,a,t){return`\n                            <button type="button" class="btn btn-primary btn-editar" data-bs-toggle="modal" data-bs-target="#editarModal" data-id="${t.id}">Editar</button>\n                           <button type="button" class="btn btn-danger btn-borrar" data-id="${t.Id}">Borrar</button>\n                                       `}}],language:{lengthMenu:"Mostrar _MENU_ registros por página",zeroRecords:"No se encontraron resultados",info:"Mostrando página _PAGE_ de _PAGES_",infoEmpty:"No hay registros disponibles",infoFiltered:"(filtrado de _MAX_ registros totales)",search:"Buscar:",loadingRecords:"Cargando...",processing:"Procesando...",emptyTable:"No hay datos disponibles en la tabla",aria:{sortAscending:": activar para ordenar la columna de manera ascendente",sortDescending:": activar para ordenar la columna de manera descendente"}}});$("#tablaCaliAsign tbody").on("click",".btn-editar",(function(){const o=a.row($(this).parents("tr")).data();console.log(o),$("#IdEdit").val(o.Id),$("#estudianteEdit").val(o.id_matricula),$("#NotaEdit").val(o.Nota),$("#Nota_2Edit").val(o.Nota_2),$("#Nota_3Edit").val(o.Nota_3)}))},error:function(o,a,t){console.error(o.responseText)}}),$("#tablaCaliAsign").on("click",".btn-borrar",(function(){const o=$(this).data("id");console.log("eliminar el registro ID:",o),$.ajax({url:"/api/calificaciones/notas/del",type:"POST",data:{Id:o},dataType:"json",success:async function(o){console.log(o);if(o.exito)return await t(),void await Swal.fire({icon:"success",html:'<span style="font-size: 1.5rem; font-weight: 900;">Eliminado Correctamente</span>',toast:!0,position:"bottom-end",iconColor:"green",timer:1500,padding:"2rem",background:"#B8FFB8",showConfirmButton:!1})},error:function(o,a,t){console.error("Error:",t)}})})),$.ajax({url:"/api/matricula-grado/all",type:"POST",data:{dga:o},dataType:"json",success:function(o){console.log(o,"de la respuesta de ma gra"),o.forEach((function(o){$("#estudiante").append('<option value="'+o.Id+'">'+o.Nombres+" "+o.Apellidos+"</option>"),$("#estudianteEdit").append('<option value="'+o.Id+'">'+o.Nombres+" "+o.Apellidos+"</option>")}))},error:function(o,a,t){console.error(o.responseText)}}),$(document).ready((()=>{$("#GuardarNota").click((async()=>{let n=new FormData($("#FormDataNotas")[0]);n=a(n),n.id_detalle_grado_asignatura=o;const e=/^(?:0|[1-9][0-9]?|100)$/,r=$('input[name="Telefono"]');let i=!0;r.each((async function(){if(!e.test($(this).val()))return i=!1,await Swal.fire({icon:"error",html:'<span style="font-size: 1.5rem; font-weight: 800;">Las notas solo pueden ir de 0 a 100</span>',toast:!0,position:"bottom-end",iconColor:"red",timer:1500,padding:"2rem",background:"rgb(255, 184, 184)",showConfirmButton:!1}),$(this).css("border","1px solid red"),!1;$(this).css("border","")})),i&&$.ajax({url:"/api/calificaciones/notas/add",type:"POST",data:n,dataType:"json",success:async function(o){if(console.log(o,"de la respuesta agregar"),o.exito)return await t(),$("#asignarNotasMat").modal("hide"),void await Swal.fire({icon:"success",html:`<span style="font-size: 1.5rem; font-weight: 900;">${o.exito}</span>`,toast:!0,position:"bottom-end",iconColor:"green",timer:1500,padding:"2rem",background:"#B8FFB8",showConfirmButton:!1});o.error?await Swal.fire({icon:"error",html:`<span style="font-size: 1.5rem; font-weight: 900;">${o.error}</span>`,toast:!0,position:"bottom-end",iconColor:"red",timer:1500,padding:"2rem",background:"#FFB8B8",showConfirmButton:!1}):o.alert&&await Swal.fire({icon:"warning",html:`<span style="font-size: 1.5rem; font-weight: 900;">${o.alert}</span>`,toast:!0,position:"bottom-end",iconColor:"yellow",timer:1500,padding:"2rem",background:"#F6FBC2",showConfirmButton:!1})},error:function(o,a,t){console.error(o.responseText)}})})),$("#GuardarNotaEdit").click((async()=>{let n=new FormData($("#FormDataNotasEdit")[0]);n=a(n),n.id_detalle_grado_asignatura=o;const e=/^(?:0|[1-9][0-9]?|100)$/,r=$('input[class="Nota"]');let i=!0;r.each((async function(){if(!e.test($(this).val()))return i=!1,await Swal.fire({icon:"error",html:'<span style="font-size: 1.5rem; font-weight: 800;">Las notas solo pueden ir de 0 a 100</span>',toast:!0,position:"bottom-end",iconColor:"red",timer:1500,padding:"2rem",background:"rgb(255, 184, 184)",showConfirmButton:!1}),$(this).css("border","1px solid red"),!1;$(this).css("border","")})),i&&$.ajax({url:"/api/calificaciones/notas/edit",type:"POST",data:n,dataType:"json",success:async function(o){if(o.exito)return $("#FormDataNotasEdit")[0].reset(),await t(),$("#editarModal").modal("hide"),void await Swal.fire({icon:"success",html:`<span style="font-size: 1.5rem; font-weight: 900;">${o.exito}</span>`,toast:!0,position:"bottom-end",iconColor:"green",timer:1500,padding:"2rem",background:"#B8FFB8",showConfirmButton:!1});o.error?await Swal.fire({icon:"error",html:`<span style="font-size: 1.5rem; font-weight: 900;">${o.error}</span>`,toast:!0,position:"bottom-end",iconColor:"red",timer:1500,padding:"2rem",background:"#FFB8B8",showConfirmButton:!1}):o.alert&&await Swal.fire({icon:"warning",html:`<span style="font-size: 1.5rem; font-weight: 900;">${o.alert}</span>`,toast:!0,position:"bottom-end",iconColor:"yellow",timer:1500,padding:"2rem",background:"#F6FBC2",showConfirmButton:!1})},error:function(o,a,t){console.error(o.responseText)}})}))}))}();//# sourceMappingURL=tablacalificacionesnotas.js.map
